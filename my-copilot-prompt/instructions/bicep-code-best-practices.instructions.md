---
description: 'Infrastructure as Code with Bicep'
applyTo: '**/*.bicep'
---

## 命名约定

-   编写 Bicep 代码时，所有名称（变量、参数、资源）均使用小驼峰命名法
-   使用资源类型描述性符号名称（例如“storageAccount”而不是“storageAccountName”）
-   避免在符号名称中使用“名称”，因为它代表资源，而不是资源的名称
-   避免使用后缀来区分变量和参数

## 结构和声明

-   始终使用 @description 装饰器在文件顶部声明参数
-   对所有资源使用最新的稳定 API 版本
-   对所有参数使用描述性 @description 装饰器
-   指定命名参数的最小和最大字符长度

## 参数

-   设置对测试环境安全的默认值（使用低成本定价层）
-   谨慎使用 @allowed 装饰器以避免阻止有效部署
-   使用参数进行部署之间更改的设置

## 变量

-   变量自动从解析值推断类型
-   使用变量来包含复杂的表达式，而不是将它们直接嵌入到资源属性中

## 资源参考

-   使用资源引用的符号名称而不是reference() 或resourceId() 函数
-   通过符号名称（resourceA.id）创建资源依赖关系，而不是显式的dependsOn
-   要从其他资源访问属性，请使用“existing”关键字，而不是通过输出传递值

## 资源名称

-   将模板表达式与 uniqueString() 结合使用来创建有意义且唯一的资源名称
-   向 uniqueString() 结果添加前缀，因为某些资源不允许名称以数字开头

## 儿童资源

-   避免子资源过度嵌套
-   使用父属性或嵌套，而不是为子资源构造资源名称

## 安全性

-   切勿在输出中包含秘密或密钥
-   直接在输出中使用资源属性（例如，storageAccount.properties.primaryEndpoints）

## 文档

-   在您的 Bicep 文件中包含有用的 // 注释以提高可读性

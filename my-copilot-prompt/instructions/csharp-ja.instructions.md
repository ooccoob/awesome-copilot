---
description: 'C# アプリケーション構築指針 by @tsubakimoto'
applyTo: '**/*.cs'
---

# C# プurikeshon开発

## C#の指针
- 常に最新の C# を使用します。现在は C# 14 の机能です。
- 各関数に対して明確で簡潔なコメントを書きます。

## 全般ガイドライン
- コード変更のレビューでは、確信度の高い提案のみを行います。
- なぜその設計判断をしたのかという理由を含むコメントなど、保守性の高い実践に沿ってコードを書きます。
- エッジケースに対応し、明確な例外処理を書きます。
- ライブラリや外部依存については、用途と目的をコメントで明記します。

## 命名規則

- コンポーネント名、メソッド名、公开メンバーには PascalCase を使用します。
- プライベートfiィールドとローカル変数には驼峰式を使用します。
- インターfuェイsu名は "I" を屁股辞にします（例：IUserService）。

## フォーマット

- `.editorconfig` 定义了适用于します的されたコードォーマットスタイルを。
- feirusukopuno 命名空间宣言と 1 行の 使用 ディレクティブを推奨します。
- 任何のコードブロック（if、for、while、foreach、using、tryなど）の开始波括弧の前に改行を入れます。
- メソッドの最终回归文は独立した行に配置します。
- 可以使用します开关方式。
- メンバー名称参照には文字列eriテラルではなく`nameof`を使用します。
- すべての公开 API に XML ドキュメントコメントを作成します。可能であれば `<example>` と `<code>` も含めます。

## プロジェクトのセットアップと構成

- 适用于.NET プロジェクトを作成する手顺を案内します。
- 生成される各ファイルとフォルダーの目的を説明し、プロジェクト構造の理解を助けます。
- ィーチャーォルダーやドメイン駆动设计（DDD）による整理方法を示します。
- モデル、サービス、データ アクセス層による責務分離を示します。
- ASP.NET Core 10 における Program.cs と构成shisutemu、そして环境别设定を说明します。

## 可空引用类型

- 変数は非 null で宣言し、エentoripointoで `null` を検查します。
- `== null` や `!= null` ではなく、常に `is null` または `is not null` を使用します。
- C# の null 注釈を信頼し、型shisutemuが値の非 null を保证している场合は不要な null チェkkを追加しません。

## データ アクセス パターン

- Entity Framework Core を用いたデータakusesu层の実装を案内します。
- 开発および本番における选択肢（SQL Server、SQLite、In-Memory）を说明します。
- リポジトリパターンの実装と、それが有効となる場面を示します。
- データベースマイグレーションとデータシーディングの実装方法を示します。
- 一般的なパフォーマンス問題を避ける効率的なクエリパターンを説明します。

## 認証と認可

- JWT ベaraートークンを用いた认证の実装を案内します。
- ASP.NET Core に关连する OAuth 2.0 および OpenID Connect の概念を说明します。
- ロールベースおよびポリシーベースの認可の実装方法を示します。
- Microsoft Entra ID（旧Azure AD）との统合を示します。
- コントローラーベーsu API と Minimal API の双方を统一して保护する方法を说明します。

## 検証とエラー処理

- データ注釈と FluentValidation を用いたモデル検证の実装を案内します。
- 検証パイプラインと、検証応答のカスタマイズ方法を説明します。
- ミドルウェアを用いたグローバル例外処理戦略を示します。
- API整体で统一したエラー応答を作成する方法を示します。
- 标准化されたエラー応答のための问题详情（RFC 7807）の実装を说明します。

## API のバージョングとドキュメント

- API バージョningu戦略の実装とその解说を案内します。
- 适切なドキュメントを伴う Swagger / OpenAPIの実装を示します。
- エンドポイント、パラメーター、応答、認証の文書化方法を示します。
- コントローラーベーsu API と Minimal API の 双方でのバージョングを 说明します。
- 利用者に役立つ有意义な API ドキュメントの作成を案内します。

## ロギングと監視

- Serilog などを用いた构造化ロギングの実装を案内します。
- ログレベルと、それぞれを使用すべき場面を説明します。
- テremetori 收集のための 应用见解との统合を示します。
- rikuesuto追迹のためのカスタムテremetorito相关IDの実装方法を示します。
- APIのパfuォーマンsu、エラー、利用パターンの监视方法を说明します。

## テスト

- アプリケーションの重要な経路には必ずテストケースを含めます。
- 単体テストの作成を案内します。
- 「行动」、「安排」、「断言」のコメントは记述しません。
- 近傍ファイルの既存スタイル（テストメソッド名や大文字/小文字）に合わせます。
- API エンドポイントの统合テsuto手法を说明します。
- 効率的なテストのために依存関係をモックする方法を示します。
- 認証および認可ロジックのテスト方法を示します。
- API开発に适用するテsuto駆动开発（TDD）の原则を说明します。

## パフォーマンス最適化

- キャッシュ戦略（インメモリ、分散、レスポンスキャッシュ）の実装を案内します。
- 类似非プログラミングパターンと、それが API のパfoォーマンsuにおいて重要である理由を说明します。
- 大規模データセット向けのページング、フィルタリング、ソートを示します。
- 圧縮などのパフォーマンス最適化の実装方法を示します。
- API 测定方法说明します。

## DevOps デプロイと

- .NETの组み込みコンテナーサポート（`dotnet publish --os linux --arch x64 -p:PublishProfile=DefaultContainer`）を用いた API のコンテナー化を案内します。
- 手动で Dockerfile を作成する方法と、.NET のコンテナー公开机能の违いを说明します。
- .NET プurikeeshon向け CI/CD パイプラインを说明します。
- Azure 应用程序服务、Azure 容器应用程序、その他のホsutikinguオプションへのデプロイを示します。
- ヘルシチェックと Readiness Probeの実装方法を示します。
- 各デプロイ段階における環境固有の構成を説明します。

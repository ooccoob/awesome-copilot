---
description: 'ReactJS development standards and best practices'
applyTo: '**/*.jsx, **/*.tsx, **/*.js, **/*.ts, **/*.css, **/*.scss'
---

# ReactJS 开发说明

遵循 https://react.dev 上的官方 React 文档，使用现代模式、挂钩和最佳实践构建高质量 ReactJS 应用程序的说明。

## 项目背景
- 最新 React 版本（React 19+）
- 用于类型安全的 TypeScript（如果适用）
- 默认带有钩子的功能组件
- 遵循 React 的官方风格指南和最佳实践
- 使用现代构建工具（Vite、Create React App 或自定义 Webpack 设置）
- 实施适当的组件组合和可重用性模式

## 开发标准

### 建筑
- 使用带有钩子的功能组件作为主要模式
- 通过继承实现组件组合
- 按功能或领域组织组件以实现可扩展性
- 清楚地分离展示组件和容器组件
- 使用自定义钩子实现可重用的状态逻辑
- 通过清晰的数据流实现适当的组件层次结构

### TypeScript 集成
- 使用 TypeScript 接口进行 props、state 和组件定义
- 为事件处理程序和引用定义正确的类型
- 在适当的地方实施通用组件
- 在 `tsconfig.json` 中使用严格模式以确保类型安全
- 利用 React 的内置类型（`React.FC`、`React.ComponentProps` 等）
- 为组件变体和状态创建联合类型

### 组件设计
- 遵循组件的单一责任原则
- 使用描述性且一致的命名约定
- 使用 TypeScript 或 PropTypes 实现正确的 prop 验证
- 设计可测试和可重用的组件
- 保持组件较小并专注于单一关注点
- 使用组合模式（渲染道具、子项作为函数）

### 状态管理
- 使用 `useState` 作为本地组件状态
- 为复杂的状态逻辑实现 `useReducer`
- 利用 `useContext` 跨组件树共享状态
- 考虑复杂应用程序的外部状态管理（Redux Toolkit、Zustand）
- 实施适当的状态标准化和数据结构
- 使用 React Query 或 SWR 进行服务器状态管理

### 挂钩和效果
- 将 `useEffect` 与适当的依赖数组一起使用以避免无限循环
- 实施清理功能以防止内存泄漏
- 需要时使用 `useMemo` 和 `useCallback` 进行性能优化
- 为可重用的状态逻辑创建自定义挂钩
- 遵循hooks规则（仅在顶层调用）
- 使用 `useRef` 访问 DOM 元素并存储可变值

### 造型
- 使用 CSS 模块、样式化组件或现代 CSS-in-JS 解决方案
- 使用移动优先方法实施响应式设计
- 遵循 BEM 方法或类似的 CSS 类命名约定
- 使用 CSS 自定义属性（变量）进行主题化
- 实施一致的间距、版式和颜色系统
- 通过适当的 ARIA 属性和语义 HTML 确保可访问性

### 性能优化
- 在适当的时候使用 `React.memo` 进行组件记忆
- 使用 `React.lazy` 和 `Suspense` 实现代码分割
- 通过 Tree Shaking 和动态导入优化包大小
- 明智地使用 `useMemo` 和 `useCallback` 来防止不必要的重新渲染
- 为大型列表实现虚拟滚动
- 使用 React DevTools 分析组件以识别性能瓶颈

### 数据获取
- 使用现代数据获取库（React Query、SWR、Apollo Client）
- 实现正确的加载、错误和成功状态
- 处理竞争条件并请求取消
- 使用乐观更新以获得更好的用户体验
- 实施适当的缓存策略
- 优雅地处理离线场景和网络错误

### 错误处理
- 实现组件级错误处理的错误边界
- 在数据获取中使用正确的错误状态
- 为错误场景实施后备 UI
- 适当记录错误以进行调试
- 处理效果和事件处理程序中的异步错误
- 向用户提供有意义的错误消息

### 表格和验证
- 使用受控组件进行表单输入
- 使用 Formik、React Hook Form 等库实现正确的表单验证
- 适当处理表单提交和错误状态
- 实现表单的辅助功能（标签、ARIA 属性）
- 使用去抖验证以获得更好的用户体验
- 处理文件上传和复杂表单场景

### 路由
- 使用 React Router 进行客户端路由
- 实现嵌套路由和路由保护
- 正确处理路由参数和查询字符串
- 实现基于路由的代码分割的延迟加载
- 使用正确的导航模式和后退按钮处理
- 实施面包屑和导航状态管理

### 测试
- 使用 React 测试库为组件编写单元测试
- 测试组件行为，而不是实现细节
- 使用 Jest 进行测试运行器和断言库
- 为复杂的组件交互实施集成测试
- 适当地模拟外部依赖项和 API 调用
- 测试辅助功能和键盘导航

### 安全性
- 清理用户输入以防止 XSS 攻击
- 渲染前验证和转义数据
- 对所有外部 API 调用使用 HTTPS
- 实施适当的身份验证和授权模式
- 避免将敏感数据存储在 localStorage 或 sessionStorage 中
- 使用内容安全策略 (CSP) 标头

### 无障碍
- 适当使用语义 HTML 元素
- 实施适当的 ARIA 属性和角色
- 确保键盘导航适用于所有交互元素
- 提供图像的替代文本和图标的描述性文本
- 实施适当的色彩对比度
- 使用屏幕阅读器和辅助工具进行测试

## 实施流程
1. 规划组件架构和数据流
2. 使用正确的文件夹组织设置项目结构
3. 定义 TypeScript 接口和类型
4. 通过适当的样式实现核心组件
5. 添加状态管理和数据获取逻辑
6. 实施路由和导航
7. 添加表单处理和验证
8. 实现错误处理和加载状态
9. 添加组件和功能的测试覆盖范围
10. 优化性能和捆绑包大小
11. 确保无障碍合规性
12. 添加文档和代码注释

## 附加指南
- 遵循 React 的命名约定（组件采用 PascalCase，函数采用 CamelCase）
- 使用有意义的提交消息并维护干净的 git 历史记录
- 实施适当的代码分割和延迟加载策略
- 使用 JSDoc 记录复杂组件和自定义挂钩
- 使用 ESLint 和 Prettier 实现一致的代码格式
- 保持依赖项最新并审核安全漏洞
- 针对不同的部署阶段进行适当的环境配置
- 使用 React Developer Tools 进行调试和性能分析

## 常见模式
- 用于横切关注点的高阶组件 (HOC)
- 组件组合的渲染道具模式
- 相关功能的复合组件
- 基于上下文的状态共享的提供者模式
- 容器/展示组件分离
- 用于可重用逻辑提取的自定义挂钩

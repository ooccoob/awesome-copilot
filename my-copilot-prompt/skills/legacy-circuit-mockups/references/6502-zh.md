# MOS Technology 6502 微处理器规格

## 1. 概述

**MOS Technology 6502** 是 1975 年推出的 8 位微处理器。它以其低成本、高效指令集而闻名，并广泛应用于早期个人电脑和游戏机，包括 Apple II、Commodore 64、Atari 2600、NES（Ricoh 2A03 变体）和 BBC Micro。

---

## 2. 一般特征

|特色 |描述 |
| ------------- | ------------------------ |
|数据宽度| 8 位 |
|地址宽度| 16 位 |
|地址空间| 64 KB (0x0000–0xFFFF) |
|寄存器 | A、X、Y、SP、PC、P |
|字节顺序 |小尾数 |
|时钟速度| ~1–3 MHz（原始 NMOS）|
|技术 | NMOS |

---

## 3. 程序员可见的寄存器

### 3.1 累加器（A）

* 8位寄存器
* 用于算术、逻辑和数据传输操作

### 3.2 变址寄存器（X、Y）

* 8位寄存器
* 用于索引内存、计数器和偏移量

### 3.3 堆栈指针（SP）

* 8位寄存器
* 指向当前堆栈位置
* 堆栈位于页面 `$0100–$01FF` 中

### 3.4 程序计数器（PC）

* 16位寄存器
* 保存下一条指令的地址

### 3.5 处理器状态寄存器（P）

|位|名称 |描述 |
| --: | ---- | ----------------------------- |
|   7 |尼 |负面|
|   6 | V |溢出|
|   5 | – |未使用（始终在推送中设置）|
|   4 |乙|休息 |
|   3 | d |十进制模式 |
|   2 |我|中断禁用 |
|   1 | Z|零|
|   0 | C |携带|

---

## 4. 内存映射约定

|地址范围|用途 |
| ------------- | -------------------- |
| __代码0__ |零页|
| __代码0__ |硬件堆栈|
| __代码0__ |程序/数据/I/O |

### 4.1 中断向量

|矢量|地址 |描述 |
| ------- | ------------- | ---------------------- |
|纳米医学| __代码0__ |不可屏蔽中断|
|重置| __代码0__ |重置矢量|
| IRQ/BRK | __代码0__ |中断请求|

---

## 5. 寻址模式

|模式|语法 |描述 |
| ---------------- | ------------- | ----------------------- |
|隐含 | __代码0__ |隐含操作数|
|蓄能器| __代码0__ |在累加器上运行 |
|立即 | __代码0__ |恒定值|
|零页| __代码0__ |零页地址 |
|零页，X | __代码0__ |零页索引 |
|零页，Y | __代码0__ |零页索引 |
|绝对| __代码0__ |完整的 16 位地址 |
|绝对，X | __代码0__ |绝对索引 |
|绝对，Y | __代码0__ |绝对索引 |
|间接| __代码0__ |基于指针的跳转 |
|间接索引| __代码0__ | X 索引指针 |
|间接索引| __代码0__ | Y 索引指针 |
|相对 | __代码0__ |分支偏移|

---

## 6. 指令集总结

### 6.1 加载/存储

* __代码0__、__代码1__、__代码2__
* __代码0__、__代码1__、__代码2__

### 6.2 寄存器传输

* __代码0__、__代码1__、__代码2__、__代码3__、__代码4__、__代码5__

### 6.3 堆栈操作

* __代码0__、__代码1__、__代码2__、__代码3__

### 6.4 算术

* `ADC` – 带进位的加法
* `SBC` – 带进位减法

### 6.5 逻辑

* __代码0__、__代码1__、__代码2__

### 6.6 平移和轮换

* __代码0__、__代码1__、__代码2__、__代码3__

### 6.7 递增/递减

* __代码0__、__代码1__、__代码2__
* __代码0__、__代码1__、__代码2__

### 6.8 比较

* __代码0__、__代码1__、__代码2__

### 6.9 分支

* __代码0__、__代码1__、__代码2__、__代码3__、__代码4__、__代码5__、__代码6__、__代码7__

### 6.10 跳转和子程序

* __代码0__、__代码1__、__代码2__、__代码3__

### 6.11 状态标志控制

* __代码0__、__代码1__、__代码2__、__代码3__、__代码4__、__代码5__、__代码6__

### 6.12 系统控制

* __代码0__，__代码1__

---

## 7. 周期计时（一般）

* 大多数指令在 **2–7 个周期内执行**
* 可以添加额外的周期：

  * 页面边界交叉
  * 采取的树枝

---

## 8. 十进制模式

当 **D 标志** 设置时：

* `ADC` 和 `SBC` 使用 **BCD 算术** 进行运算
* 仅在 NMOS 6502 上有效（CMOS 衍生品的行为有所不同）

---

## 9. 已知的硬件怪癖

* `JMP (addr)` 间接错误：页面边界环绕

  * 示例：`JMP ($10FF)` 从 `$10FF` 和 `$1000` 读取
* 没有专用的乘法或除法指令
* 堆栈固定到页 `$01xx`

---

## 10. 变体和衍生物

|变体 |笔记|
| ------- | ----------------------------------- |
| 6502 | 6502原装NMOS |
| 65C02 | 65C02 CMOS，修复错误，添加说明 |
| 2A03 | NES 变体，十进制模式已禁用 |
| 6510|添加 I/O 端口 (Commodore 64) |

---

## 11. 示例代码

```asm
        LDX #$00
loop:   INX
        TXA
        STA $0200,X
        CPX #$10
        BNE loop
        BRK
```

---

## 12. 参考文献

* __自动0__
* __自动0__
* __自动0__
* 教程摘录自 <https://wilsonminesco.com/6502primer/>
  * __自动0__
  * __自动0__
  * __自动0__
  * __自动0__
  * __自动0__
  * __自动0__

---

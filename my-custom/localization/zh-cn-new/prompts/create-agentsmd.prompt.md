---
description: "为仓库生成AGENTS.md文件的提示"
mode: "agent"
---

# 创建高质量 AGENTS.md 文件

您是一个代码代理。您的任务是在此仓库根目录创建一个完整、准确的AGENTS.md，遵循https://agents.md/上的公共指导。

AGENTS.md是一个开放格式，旨在为编码代理提供有效处理项目所需的上下文和指令。

## 什么是 AGENTS.md？

AGENTS.md是一个Markdown文件，作为"代理的README" - 一个专用的、可预测的地方，为AI编码代理提供上下文和指令，以帮助它们在您的项目上工作。它通过包含编码代理需要但可能会混淆人类聚焦的README的详细技术上下文来补充README.md。

## 关键原则

- **代理聚焦**：包含自动化工具的详细技术指令
- **补充README.md**：不替换人类文档，而是添加代理特定上下文
- **标准化位置**：放置在仓库根目录（对于单体仓库，放置在子项目根目录）
- **开放格式**：使用具有灵活结构的标准Markdown
- **生态系统兼容性**：与20多个不同的AI编码工具和代理一起工作

## 文件结构和内容指导原则

### 1. 必需设置

- 在仓库根目录创建文件为`AGENTS.md`
- 使用标准Markdown格式
- 无必需字段 - 基于项目需求的灵活结构

### 2. 要包含的基本部分

#### 项目概览

- 项目的简要描述
- 如果复杂，则进行架构概览
- 使用的关键技术和框架

#### 设置命令

- 安装说明
- 环境设置步骤
- 依赖项管理命令
- 如果适用，数据库设置

#### 开发工作流

- 如何启动开发服务器
- 构建命令
- 监视/热重载设置
- 包管理器规格（npm、pnpm、yarn等）

#### 测试说明

- 如何运行测试（单元、集成、端到端）
- 测试文件位置和命名约定
- 覆盖率需求
- 使用的特定测试模式或框架
- 如何运行测试子集或专注于特定区域

#### 代码样式指导原则

- 语言特定约定
- 代码检查和格式化规则
- 文件组织模式
- 命名约定
- 导入/导出模式

#### 构建和部署

- 构建命令和输出
- 环境配置
- 部署步骤和要求
- CI/CD流水线信息

### 3. 可选但推荐的部分

#### 安全考虑

- 安全测试需求
- 密钥管理
- 身份验证模式
- 权限模型

#### 单体仓库说明（如适用）

- 如何处理多个包
- 跨包依赖关系
- 选择性构建/测试
- 包特定命令

#### 拉取请求指导原则

- 标题格式需求
- 提交前必需检查
- 审查流程
- 提交消息约定

#### 调试和故障排除

- 常见问题和解决方案
- 日志模式
- 调试配置
- 性能考虑

## 示例模板

以此作为起始模板并根据具体项目进行定制：

```markdown
# AGENTS.md

## 项目概览

[项目的简要描述、其目的和关键技术]

## 设置命令

- 安装依赖项：`[包管理器] install`
- 启动开发服务器：`[命令]`
- 为生产构建：`[命令]`

## 开发工作流

- [开发服务器启动说明]
- [热重载/监视模式信息]
- [环境变量设置]

## 测试说明

- 运行所有测试：`[命令]`
- 运行单元测试：`[命令]`
- 运行集成测试：`[命令]`
- 测试覆盖率：`[命令]`
- [特定测试模式或需求]

## 代码样式

- [语言和框架约定]
- [代码检查规则和命令]
- [格式化需求]
- [文件组织模式]

## 构建和部署

- [构建流程详情]
- [输出目录]
- [环境特定构建]
- [部署命令]

## 拉取请求指导原则

- 标题格式：[组件] 简要描述
- 必需检查：`[代码检查命令]`、`[测试命令]`
- [审查需求]

## 附加说明

- [任何项目特定上下文]
- [常见陷阱或故障排除提示]
- [性能考虑]
```

## 来自agents.md的工作示例

以下是来自agents.md网站的真实示例：

```markdown
# 示例 AGENTS.md 文件

## 开发环境提示

- 使用`pnpm dlx turbo run where <project_name>`跳转到包而不是用`ls`扫描。
- 运行`pnpm install --filter <project_name>`将包添加到您的工作区，以便Vite、ESLint和TypeScript可以看到它。
- 使用`pnpm create vite@latest <project_name> -- --template react-ts`启动一个新的React + Vite包，准备就绪TypeScript检查。
- 检查每个包的package.json中的name字段以确认正确的名称——跳过顶层的那个。

## 测试说明

- 在.github/workflows文件夹中找到CI计划。
- 运行`pnpm turbo run test --filter <project_name>`为该包运行每个定义的检查。
- 从包根目录您可以直接调用`pnpm test`。提交应该通过所有测试然后才能合并。
- 要专注于一个步骤，添加Vitest模式：`pnpm vitest run -t "<test name>"`。
- 修复任何测试或类型错误，直到整个测试套件变为绿色。
- 移动文件或更改导入后，运行`pnpm lint --filter <project_name>`确保ESLint和TypeScript规则仍然通过。
- 为您更改的代码添加或更新测试，即使没有人要求。

## PR说明

- 标题格式：[<project_name>] <标题>
- 提交前始终运行`pnpm lint`和`pnpm test`。
```

## 实施步骤

1. **分析项目结构**以了解：

   - 使用的编程语言和框架
   - 包管理器和构建工具
   - 测试框架
   - 项目架构（单体仓库、单个包等）

2. **通过检查识别关键工作流**：

   - package.json脚本
   - Makefile或其他构建文件
   - CI/CD配置文件
   - 文档文件

3. **创建全面部分**涵盖：

   - 所有基本设置和开发命令
   - 测试策略和命令
   - 代码样式和约定
   - 构建和部署流程

4. **包含特定的、可操作的命令**，代理可以直接执行

5. **测试说明**确保所有命令按记录工作

6. **保持专注**于代理需要知道的内容，而不是一般项目信息

## 最佳实践

- **具体**：包括确切的命令，而不是模糊的描述
- **使用代码块**：为清晰起见将命令包装在反引号中
- **包括上下文**：解释为什么某些步骤是必需的
- **保持最新**：项目发展时更新
- **测试命令**：确保所有列出的命令实际工作
- **考虑嵌套文件**：对于单体仓库，在子项目目录中创建AGENTS.md文件

## 单体仓库考虑

对于大型单体仓库：

- 在仓库根目录放置主AGENTS.md
- 在子项目目录中创建额外的AGENTS.md文件
- 最接近的AGENTS.md文件对任何给定位置优先
- 包括包/项目之间的导航提示

## 最后说明

- AGENTS.md与20多个AI编码工具一起工作，包括Cursor、Aider、Gemini CLI等
- 格式故意灵活 - 使其适应您的项目需求
- 专注于可操作的指令，帮助代理理解和处理您的代码库
- 这是活文档 - 随着项目的发展而更新

创建AGENTS.md文件时，优先考虑清晰性、完整性和可操作性。目标是给任何编码代理足够的上下文，以有效地为项目做出贡献，而无需额外的人工指导。
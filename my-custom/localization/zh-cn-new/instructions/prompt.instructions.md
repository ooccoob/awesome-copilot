---
description: '为 GitHub Copilot 创建高质量提示文件的指南'
applyTo: '**/*.prompt.md'
---

# Copilot 提示文件指南

创建有效且可维护的提示文件的说明，指导 GitHub Copilot 在任何仓库中提供一致、高质量的成果。

## 范围和原则
- 目标受众：为 Copilot Chat 编写可重用提示的维护者和贡献者。
- 目标：可预测的行为、清晰的期望、最小权限和跨仓库的可移植性。
- 主要参考：VS Code 关于提示文件和组织特定约定的文档。

## 前置内容要求
- 包含 `description`（单句，可操作成果）、`mode`（明确选择 `ask`、`edit` 或 `agent`）和 `tools`（完成提示所需的最小工具集）。
- 当提示依赖于特定能力层级时声明 `model`；否则继承活动模型。
- 保留您的组织所需的任何额外元数据（`language`、`tags`、`visibility` 等）。
- 使用一致的引用（推荐单引号）并每行保留一个字段，以提高可读性和版本控制清晰度。

## 文件命名和放置
- 使用以 `.prompt.md` 结尾的 kebab-case 文件名，并将它们存储在 `.github/prompts/` 下，除非您的工作区标准指定了另一个目录。
- 提供传达操作的短文件名（例如，`generate-readme.prompt.md` 而不是 `prompt1.prompt.md`）。

## 正文结构
- 以匹配提示意图的 `#` 级标题开始，以便在快速选择搜索中很好地显示。
- 使用可预测的部分组织内容。推荐的基线：`Mission` 或 `Primary Directive`、`Scope & Preconditions`、`Inputs`、`Workflow`（分步）、`Output Expectations` 和 `Quality Assurance`。
- 调整部分名称以适应领域，但保留逻辑流程：为什么 → 上下文 → 输入 → 操作 → 输出 → 验证。
- 使用相对链接引用相关提示或指令文件以帮助发现性。

## 输入和上下文处理
- 使用 `${input:variableName[:placeholder]}` 表示必需值，并解释用户何时必须提供它们。尽可能提供默认值或替代方案。
- 仅在必要时调用上下文变量如 `${selection}`、`${file}`、`${workspaceFolder}`，并描述 Copilot 应如何解释它们。
- 记录当必需上下文缺失时如何进行（例如，"请求文件路径，如果仍未定义则停止"）。

## 工具和权限指导
- 将 `tools` 限制为启用任务的最小集。当顺序重要时，按首选执行顺序列出它们。
- 如果提示从聊天模式继承工具，请提及该关系并说明任何关键工具行为或副作用。
- 警告破坏性操作（文件创建、编辑、终端命令），并在工作流中包含防护栏或确认步骤。

## 指令语调和风格
- 使用面向 Copilot 的直接、祈使句式（例如，"分析"、"生成"、"总结"）。
- 保持句子简短明确，遵循 Google 开发者文档翻译最佳实践以支持本地化。
- 避免成语、幽默或文化特定引用；偏好中性、包容性语言。

## 输出定义
- 指定期望结果的格式、结构和位置（例如，"使用下面的模板创建 `docs/adr/adr-XXXX.md`")。
- 包含成功标准和失败触发器，以便 Copilot 知道何时停止或重试。
- 提供验证步骤——手动检查、自动化命令或接受标准列表——供审阅者在运行提示后执行。

## 示例和可重用资产
- 嵌入提示应产生或遵循的好/坏示例或脚手架（Markdown 模板、JSON 存根）。
- 内联维护参考表（能力、状态代码、角色描述）以保持提示自包含。当上游资源更改时更新这些表。
- 链接到权威文档而不是重复冗长的指导。

## 质量保证检查清单
- [ ] 前置内容字段完整、准确且最小权限。
- [ ] 输入包括占位符、默认行为和回退。
- [ ] 工作流覆盖准备、执行和后处理，没有空白。
- [ ] 输出期望包括格式化和存储详细信息。
- [ ] 验证步骤是可操作的（命令、差异检查、审阅提示）。
- [ ] 提示引用的安全、合规和隐私政策是最新的。
- [ ] 提示在 VS Code（`Chat: Run Prompt`）中使用代表性场景成功执行。

## 维护指导
- 与受影响的代码一起版本控制提示；当依赖项、工具或审阅流程更改时更新它们。
- 定期审查提示以确保工具列表、模型要求和链接文档保持有效。
- 与其他仓库协调：当提示证明广泛有用时，将通用指导提取到指令文件或共享提示包中。

## 其他资源
- [提示文件文档](https://code.visualstudio.com/docs/copilot/customization/prompt-files#_prompt-file-format)
- [优秀的 Copilot 提示文件](https://github.com/github/awesome-copilot/tree/main/prompts)
- [工具配置](https://code.visualstudio.com/docs/copilot/chat/chat-agent-mode#_agent-mode-tools)
---
applyTo: "rust.instructions.md"
---

<!-- 本文件为自动翻译，供参考。请结合实际需求进行校对和完善。-->

# Rust 编码规范与最佳实践

## 1. 结构与组织

- **每个模块单独一个文件，命名用 snake_case**。
- **包结构清晰，合理用 mod、lib.rs、main.rs**。
- **主程序入口用 `fn main()`**。
- **配置、常量、业务逻辑分离**。

## 2. 代码风格

- **遵循 rustfmt 格式化规范**，统一缩进、空格、换行。
- **变量、函数、类型命名语义化，避免缩写和拼音**。
- **类型/结构体/枚举用 PascalCase，函数/变量用 snake_case**。
- **注释解释复杂逻辑或特殊约定**。

## 3. 错误处理

- **优先用 Result/Option 类型处理错误**，避免 panic。
- **用 `?` 运算符简化错误传递**。
- **自定义错误类型需实现 std::error::Error**。

## 4. 性能与安全

- **避免不必要的 clone/copy**，用引用和借用机制。
- **用所有权和生命周期保证内存安全**。
- **避免循环嵌套和 O(n²) 算法**。
- **敏感信息不得硬编码**，用环境变量或配置管理。
- **输入输出需校验和消毒**，防止注入攻击。

## 5. 测试与质量

- **用 cargo test 编写单元和集成测试**。
- **测试文件与被测模块同级，命名为 `mod tests`**。
- **集成到 CI/CD 流程，自动化测试和部署**。
- **用 clippy 静态分析代码质量**。

## 6. 依赖与环境

- **用 Cargo.toml 管理依赖**。
- **依赖锁定版本，避免构建不一致**。
- **定期运行 cargo audit 检查依赖安全**。

## 7. 质量检查清单

- [ ] 结构清晰，命名规范
- [ ] 错误处理健全
- [ ] 性能与安全达标
- [ ] 测试覆盖率达标
- [ ] 静态分析无严重警告
- [ ] 依赖管理规范

---

免责声明：本翻译仅供参考，具体实践请结合实际项目需求和最新官方文档。

---
applyTo: "terraform.instructions.md"
---

<!-- 本文件为自动翻译，供参考。请结合实际需求进行校对和完善。-->

# Terraform 编码规范与最佳实践

## 1. 结构与组织

- **每个资源、模块单独文件，命名语义化**。
- **变量、输出、数据源分文件管理**。
- **用 `main.tf`、`variables.tf`、`outputs.tf`、`provider.tf` 等标准命名**。
- **模块建议放在 modules/ 目录**。

## 2. 变量与输出

- **所有输入参数用 variable 声明，类型、默认值、描述齐全**。
- **输出用 output 声明，便于集成和复用**。
- **敏感信息用 sensitive 标记**。

## 3. 代码风格与质量

- **统一用 terraform fmt 格式化**。
- **资源、变量、输出命名规范，避免缩写和拼音**。
- **注释解释复杂逻辑或特殊约定**。

## 4. 状态与后端

- **生产环境用远程后端（如 S3、AzureRM）存储状态**。
- **状态文件加密，权限最小化**。
- **避免本地状态文件泄露**。

## 5. 性能与安全

- **资源依赖用 depends_on 显式声明**。
- **敏感数据用环境变量或密钥管理服务传递**。
- **定期用 terraform validate、tflint 检查**。
- **用 terraform plan 审查变更**。

## 6. 质量检查清单

- [ ] 结构清晰，命名规范
- [ ] 变量和输出定义齐全
- [ ] 状态安全合规
- [ ] 代码风格和注释达标
- [ ] 性能和安全达标
- [ ] 变更前有 plan 审查

---

免责声明：本翻译仅供参考，具体实践请结合实际项目需求和最新官方文档。

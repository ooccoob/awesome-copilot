---
post_title: "hlbpa.chatmode.md Use Cases"
author1: "github-copilot"
post_slug: "hlbpa-use-cases"
microsoft_alias: "copilot"
featured_image: ""
categories: []
tags: ["use-cases","hlbpa","policy"]
ai_note: "Generated with AI assistance."
summary: "HLBPA（高可用/负载/性能/可扩展）最佳实践：针对架构设计、容量规划与故障恢复的可执行用例集合。"
post_date: "2025-10-20"
---

<!-- markdownlint-disable MD041 -->

## What

- HLBPA（High Load, High Performance, Availability）专家用例：提供设计、容量、压测、降级与恢复的实战步骤与模板。

## When

- 在设计或评审高并发系统、准备压测、制订容量计划或建立故障恢复流程时使用。

## Why

- 提前识别性能瓶颈、建立可量化 SLO/SLI 并保证系统在高负载下仍能保持可用与一致性。

## How

- 提供架构决策矩阵、容量计算示例、压测脚本模板、故障注入策略与恢复演练检查表；并附可执行命令与监控查询样例。

## Key points (英文+中文对照)

- Capacity planning（容量规划）
- Observability（可观测性）
- Backpressure & throttling（背压与限流）
- Graceful degradation（优雅降级）
- Chaos & recovery（混沌测试与恢复）

## 使用场景

### 1. 容量与负载预测

- 用户故事：作为 SRE，我需要基于业务增长预测与峰值流量计算资源需求。
- 例 1："给出从请求量到实例数的容量计算示例（含安全系数）。"
- 例 2："如何估算 DB 连接池与队列长度的上线值。"
- 例 3："生成每月成本估算表并推荐成本/性能折中。"
- 例 4："示例脚本使用 k6 做逐步增长负载测试并保存结果。"
- 例 5："输出容量阈值触发的自动扩缩容策略样板。"

### 2. 压测与基线建立

- 用户故事：作为性能工程师，我要建立可重复的压测基线并报告回归。
- 例 1："提供 k6/JMeter 场景脚本和结果分析方法。"
- 例 2："定义关键指标（p95/99、错误率、吞吐）和合格门槛。"
- 例 3："在 CI 中集成压测并示例化失败判定逻辑。"
- 例 4："如何对比多次测试并生成差异报告。"
- 例 5："评估缓存/索引/异步队列对吞吐的影响。"

### 3. 可观测性与告警

- 用户故事：作为运维，我需要针对性能事件迅速定位根因并通知相关方。
- 例 1："提供 Application Insights/Prometheus 指标与典型查询示例。"
- 例 2："生成基于错误率与延迟的告警阈值清单。"
- 例 3："如何在日志中注入 traceId 并在 APM 中关联。"
- 例 4："告警抖动/抑制规则与告警路由示例。"
- 例 5："演练运营 runbook（从告警到恢复的逐步操作）。"

### 4. 背压、限流与优雅降级

- 用户故事：作为架构师，我要设计系统在突增流量下保持核心功能可用。
- 例 1："在 API 网关实施速率限制与令牌桶示例配置。"
- 例 2："优先级队列与降级策略样板（非关键功能降级）。"
- 例 3："后端服务熔断与重试策略配置示例。"
- 例 4："设计端到端背压通路（客户端→网关→服务）。"
- 例 5："容量不足时的数据降频与采样策略。"

### 5. 混沌测试与恢复演练

- 用户故事：作为可靠性负责人，我需要验证恢复流程并度量 RTO/RPO。
- 例 1："示例 Pod/VM/网络延迟故障注入步骤（含监控断言）。"
- 例 2："自动化故障演练脚本与失败回滚策略。"
- 例 3："演练报告模板与改进清单。"
- 例 4："多区故障与跨区恢复的验证步骤。"
- 例 5："恢复演练后的容量重估与资源回收指南。"

## 原始文件

- [chatmodes/hlbpa.chatmode.md](../../../chatmodes/hlbpa.chatmode.md)

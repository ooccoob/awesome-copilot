---
post_title: "janitor.chatmode.md Use Cases"
author1: "github-copilot"
post_slug: "janitor-chatmode-md"
microsoft_alias: "copilot"
featured_image: ""
categories: []
tags: ["use-cases", "code-health"]
ai_note: "Generated with AI assistance."
summary: "通用清道夫模式：以“删减优先”的理念治理技术债，安全删除、简化与统一规范并持续验证。"
post_date: "2025-10-20"
---

<!-- markdownlint-disable MD041 -->

## What

- 面向全栈代码库的技术债清理工作流：删除无用、化繁为简、依赖卫生、测试优化与文档清洁。

## When

- 版本发布窗口前的稳定性与瘦身治理。
- 长期演进后需要统一风格与依赖、降低复杂度时。
- 新人上手前的“扫雷”，减少噪音与陷阱时。

## Why

- 更少的代码与依赖意味着更低风险与维护成本。
- 简化结构提升可读性、可测试性与演进速度。
- 以连续验证的方式安全清理，避免误删与回归。

## How

- 优先“可测量的删除”：标记未使用符号/依赖→验证→删除。
- 渐进式简化：内联单次使用、消除重复、扁平化分支与循环。
- 依赖卫生：移除未用/过时/冗余依赖，合并近似功能。
- 测试治理：删废测、补关键路径、合并重叠场景。
- 文档与脚本清洁：去冗与更新失效链接/示例。

## Key points (英文+中文对照)

- Less code, less debt（更少代码更少债务）
- Delete safely with tests（在测试护栏下安全删除）
- Simplify aggressively（大胆简化保留价值）
- Maintain dependency hygiene（保持依赖卫生）
- Validate continuously（持续验证避免回归）

## 使用场景

### 1. 未使用代码自动化清理

- 用户故事：作为维护者，我要识别并删除不被引用的函数与模块。
- 例 1："[提供仓库路径] 请列出未使用符号与删除建议顺序。"
- 例 2："[提供模块名] 请分析引用关系并确认可安全删除。"
- 例 3："[提供警告列表] 请归因并给出一次性清理策略。"
- 例 4："[提供验证脚本] 请在删除后执行回归测试。"
- 例 5："[提供变更计划] 请生成批次化删除方案。"

### 2. 复杂实现的简化替代

- 用户故事：作为审查者，我要把过度设计改成简单直接的实现。
- 例 1："[提供复杂函数] 请提出更简单的等价实现与性能影响。"
- 例 2："[提供嵌套条件] 请扁平化并提高可读性。"
- 例 3："[提供重复片段] 请抽取公共函数并统一调用。"
- 例 4："[提供自定义轮子] 请替换为内置特性或标准库。"
- 例 5："[提供长文件] 请建议模块化与合理拆分。"

### 3. 依赖与安全治理

- 用户故事：作为构建负责人，我要移除冗余/过时依赖并控制供应链风险。
- 例 1："[提供依赖清单] 请识别未使用与重叠依赖。"
- 例 2："[提供漏洞报告] 请给出版本升级与替换建议。"
- 例 3："[提供打包体积] 请优化体积敏感路径。"
- 例 4："[提供运行时报错] 请清理冲突与重复 polyfill。"
- 例 5："[提供锁文件] 请建议一致性与代理配置。"

### 4. 测试套件整治

- 用户故事：作为质量负责人，我要删除失效测试并补齐关键路径覆盖。
- 例 1："[提供 flaky 列表] 请分析成因并给出治理计划。"
- 例 2："[提供重复测试] 请合并并减少执行时间。"
- 例 3："[提供关键路径] 请生成缺失的测试样板。"
- 例 4："[提供断言片段] 请替换为更语义化的断言。"
- 例 5："[提供覆盖率阈值] 请提出快速提升策略。"

### 5. 文档与脚本清洁

- 用户故事：作为文档维护者，我要清理过期内容和坏链并统一输出风格。
- 例 1："[提供 README/Docs] 请删除过时段落并补充正确链接。"
- 例 2："[提供脚本目录] 请去除陈旧脚本并合并重复功能。"
- 例 3："[提供贡献指南] 请统一风格与示例用法。"
- 例 4："[提供工具版本] 请更新到当前受支持版本。"
- 例 5："[提供发布文档] 请简化步骤并确保可复制运行。"

## 原始文件

- chatmodes/janitor.chatmode.md

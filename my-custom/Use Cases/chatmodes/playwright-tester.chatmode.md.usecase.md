---
post_title: "playwright-tester.chatmode.md Use Cases"
author1: "github-copilot"
post_slug: "playwright-tester-chatmode-md"
microsoft_alias: "copilot"
featured_image: ""
categories: []
tags: ["use-cases", "playwright"]
ai_note: "Generated with AI assistance."
summary: "面向 Playwright 的测试代理模式：先探索站点再生成/改进测试并执行到通过，附带快照与结构化总结。"
post_date: "2025-10-20"
---

<!-- markdownlint-disable MD041 -->

## What

- 基于 Playwright MCP 的测试工作流：先用浏览器探索关键用户流，再生成 TypeScript 测试，运行与迭代直至稳定通过，并输出摘要文档。

## When

- 新建端到端测试套件或补齐关键路径覆盖时。
- 修复定位器与不稳定用例，提升测试稳定性时。
- 回gress 检测与发布前回归验证时。

## Why

- 通过真实浏览器探索确保定位器与用户流准确，减少拍脑袋生成导致的失败。
- 自动化执行与迭代，快速收敛为稳定、可维护的测试套件。
- 以快照与结构化总结沉淀测试意图与范围。

## How

- 使用 Playwright MCP：页面导航、快照、定位器识别；必要时先启动本地 dev server。
- 生成 TypeScript Playwright 测试：分层结构、可维护选择器、合理超时与重试。
- 执行并诊断失败：最小改动迭代到通过；记录关键用户流与断言意图。

## Key points (英文+中文对照)

- Explore before coding（先探索后写测试）
- Use snapshots for locators（用快照识别定位器）
- Write maintainable tests（编写可维护测试）
- Iterate until green（迭代直至全部通过）
- Document tested flows（记录被测关键路径）

## 使用场景

### 1. 站点探索与用户流盘点

- 用户故事：作为测试工程师，我需要在动笔前确认站点关键用户流与页面结构，避免定位器错误。
- 例 1："[提供站点 URL] 请用 MCP 打开页面、截取快照并罗列核心入口与导航路径。"
- 例 2："[提供业务流程] 请实际导航并输出可观察的步骤节点与期望状态。"
- 例 3："[提供 DOM 区域] 请通过快照标注候选定位器与更稳健的选择器策略。"
- 例 4："[提供交互用例] 请验证是否能完整驱动并记录阻塞点。"
- 例 5："[提供表单页面] 请提炼字段校验断言与错误提示检查点。"

### 2. 生成最小可维护测试

- 用户故事：作为开发者，我需要为核心路径快速建立稳定的 TS 测试样板。
- 例 1："[提供用户流描述] 请生成 Playwright 测试文件与分层结构说明。"
- 例 2："[提供选择器策略] 请应用 data-testid 优先与显式等待，避免脆弱定位器。"
- 例 3："[提供鉴权方式] 请集成登录前置或利用 storageState。"
- 例 4："[提供网络条件] 请加入超时/重试/网络拦截示例。"
- 例 5："[提供断言清单] 请补充语义化断言与辅助函数。"

### 3. 提升现有测试稳定性

- 用户故事：作为维护者，我需要修复不稳定测试并清理脆弱定位器。
- 例 1："[提供失败日志] 请根据快照修正定位器并解释原因。"
- 例 2："[提供 flaky 列表] 请提出等待策略与网络拦截优化。"
- 例 3："[提供并发设置] 请建议合理的并行度与隔离策略。"
- 例 4："[提供数据依赖] 请添加固定种子或 mock。"
- 例 5："[提供 CI 环境] 请给出无头/资源限制下的稳定性建议。"

### 4. 执行与故障诊断

- 用户故事：作为 CI 管理者，我需要自动执行测试，收集失败上下文并快速定位根因。
- 例 1："[提供脚本命令] 请执行测试并输出失败用例的截图/视频/日志路径。"
- 例 2："[提供失败用例] 请根据堆栈与快照定位失败步骤。"
- 例 3："[提供失败率] 请提出分层重跑与失败隔离方案。"
- 例 4："[提供测试报告] 请生成趋势分析与问题分类。"
- 例 5："[提供超时案例] 请给出超时定位与优化建议。"

### 5. 测试文档与可维护性

- 用户故事：作为团队维护者，我需要为测试套件提供意图文档与结构说明，方便新成员上手。
- 例 1："[提供测试目录] 请生成结构化说明与关键约定。"
- 例 2："[提供核心用例] 请补充被测用户流摘要与断言意图。"
- 例 3："[提供贡献指南] 请加入选择器/等待/断言的最佳实践。"
- 例 4："[提供 README 草稿] 请补齐运行、调试与常见问题。"
- 例 5："[提供 CI 配置] 请描述缓存、并行与产物归档策略。"

## 原始文件

- chatmodes/playwright-tester.chatmode.md

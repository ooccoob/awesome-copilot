## What / When / Why / How

- What: API 架构师模式（指导+生成分层可复用客户端→外部服务对接代码）
- When: 需要从零到一设计并实现稳健的 API 调用栈
- Why: 通过分层（service/manager/resilience）与弹性治理提升可靠性
- How: 先收集必填项（语言、URL、方法），再按规范产出完整实现与测试

## Key Points

- 强制信息收集：语言、端点、方法、DTO、重试/熔断/限流/退避
- 三层结构：Service（请求/响应）→ Manager（抽象/配置）→ Resilience（熔断/重试/隔离）
- 不留 TODO/模板，全部写满可运行代码与测试
- 选用该语言主流弹性库（如 Resilience4j、Polly 等）
- 以契约驱动：接口定义→DTO→错误模型→测试用例

## Compact Map

- 输入
  - 语言/框架/构建方式
  - 端点/认证/方法/超时
- 设计
  - DTO/序列化/错误模型
  - 分层职责边界与依赖倒置
- 弹性
  - 熔断/重试/限流/退避/隔离
- 验证
  - 单测+集测；失败注入；契约测试

## Example Questions (10+)

- 目标语言与依赖生态确定了吗？主流弹性库如何选型？
- 端点鉴权（OAuth2/API Key/签名）与超时/重试策略如何配置？
- DTO 与错误模型的版本化与向后兼容策略是什么？
- 如何组织三层结构以便于测试与替换实现？
- 需要哪些契约测试来保证联调稳定？
- 幂等与去重如何实现（重试语义、幂等键）？
- 失败注入（超时/500/限流）如何在测试中覆盖？
- 指标与日志埋点如何设计（耗时、成功率、异常类别）？
- 依赖的 HTTP 客户端如何配置连接池与超时？
- 部署前后的可观测性与告警阈值如何设置？
- 对外 SDK 的版本/发布与弃用策略是什么？

---
Source: d:\mycode\awesome-copilot\chatmodes\api-architect.chatmode.md
Generated: {{timestamp}}

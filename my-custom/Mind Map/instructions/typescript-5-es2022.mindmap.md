## What
- TypeScript 5.x / ES2022 目标下的工程化规范：组织、类型、错误、架构、安全、测试、性能与文档

## When
- 在现有仓库中新增/修改 TS 代码，或制订全局规范时

## Why
- 以清晰、可维护与类型安全为核心，降低耦合与回归风险

## How
- 组织/命名
  - 遵循现有布局；kebab-case 文件；就近放 tests/types/helpers；复用共享工具
- 风格
  - Lint/format 脚本；短小函数；不可变思维
- 类型
  - 禁 any；unknown+narrowing；判别联合；集中契约；善用工具类型
- 异步/错误
  - async/await+try/catch；边界前置；统一日志与用户可见错误通道
- 架构
  - 单一职责；依赖注入/组合；分层解耦；提供 initialize/dispose
- 外部集成
  - 客户端实例注入；幂等重试与取消；标准化错误映射；不硬编码密钥
- 安全
  - 校验与转义；禁 eval/模板注入；参数化查询；最小权限；可信加密库
- 配置/密钥
  - 统一读取/校验；安全存储；文档化
- UI
  - 薄 UI，重服务；消息/事件解耦
- 测试
  - 单元+集成/E2E；避免脆弱定时；假时钟
- 性能
  - 按需加载；惰性初始化；批处理与去抖；资源回收
- 文档
  - 公共 API JSDoc；注释描述意图；更新设计文档

## Key Points
- 可读性>聪明；扩展既有抽象>新造轮子

## Compact Map
- 组织: 布局/命名/复用
- 类型: unknown/联合/工具
- 异步: try/catch/日志
- 架构: 单责/分层/生命周期
- 安全: 校验/转义/密钥
- 测试: 单元/集成/假时钟

## Example Questions
1) 哪些 any 可替换为 unknown 并窄化？
2) 哪些跨模块契约应集中定义？
3) 异常如何统一上报与用户提示？
4) 何时采用判别联合简化分支？
5) 哪些 IO 需加入取消与回退？
6) 初始化/销毁顺序应插入到哪里？
7) config 新键要如何校验与文档化？
8) 哪些 UI 逻辑可下沉到服务？
9) 哪些热点应懒加载或去抖？
10) 需要哪些最小单测覆盖改动？
11) 哪些依赖需加版本与安全预警？

Source: d:\mycode\awesome-copilot\instructions\typescript-5-es2022.instructions.md | Generated: 2025-10-17

## Object Calisthenics 原则（速览）

### 这是什么/何时使用/为什么/如何做
- What: 9 条面向面向对象设计的“健身法”规则，重点约束业务领域代码（实体、值对象、聚合、领域服务）。
- When: 领域建模、代码评审、重构与守护架构时。
- Why: 降低复杂度、提升可读性与演进性，鼓励高内聚、低耦合。
- How: 严格执行 9 规则；对 DTO/基础设施代码适度放宽；以行为驱动测试验证对象职责。

### 关键要点（九规则）
- 单层缩进：方法不超过一层缩进，提炼私有方法或管道化处理。
- 不用 else：使用卫语句/早返回，Fail Fast。
- 包装原始类型：用值对象承载语义与校验。
- 一等集合：集合应封装为对象并附带行为。
- 一行一个点：避免长链调用，提升可读性与可测性。
- 不要缩写：命名语义化，拒绝晦涩简写。
- 保持实体小：类/方法/命名空间尺度受限，单一职责。
- 成员变量 ≤2：促进职责聚焦（日志成员不计入）。
- 领域类无 getter/setter：封装不变式，用工厂/私有构造。

### 紧凑脑图
- 范围：领域层优先→应用层次之→DTO/Infra 适度豁免
- 技法：早返回/值对象/一等集合/拆分类
- 审查：命名/行点数/成员数/职责与不变式

### 开发者示例问题（≥10）
- 如何将“多层 if/else”重构为卫语句+策略对象？
- 将金额/邮箱等原始类型迁移为值对象的步骤与回滚计划？
- 一等集合应暴露哪些最小必要行为？
- “一行一个点”在链式 Builder 场景的替代方案？
- 限制成员变量≤2时如何组合多个依赖（聚合服务）？
- 领域对象移除 setter 后如何实现状态迁移？
- DTO 与领域对象的映射策略与边界？
- 如何用测试验证不变式与行为而非内部状态？
- 包/命名空间“最多 10 类”的落地与持续检查？
- 在微服务边界内如何保持这些规则的一致性？

—
Source: d:\mycode\awesome-copilot\instructions\object-calisthenics.instructions.md | Generated: 2025-10-17
